Domain-Driven Design - 1

Объясните, почему DDD называют “способом мышления”, а не набором паттернов или фреймворком. 
        DDD ставит во главу угла понимание бизнес-процессов и их отражение в коде через глубокое взаимодействие с экспертами. Паттерны — лишь инструменты, а мышление заключается в приоритете бизнес-логики над техническими деталями реализации.

Приведите пример системы, в которой есть domain, но подход DDD не используется. Как это проявится в коде и процессах команды? 
        Простая CRM-система, написанная как набор CRUD-операций. В коде это проявится в виде «анемичной модели» (только данные) и логики, размазанной по контроллерам или хранимым процедурам; в процессах — в разрыве между тем, как говорит бизнес, и тем, как называются функции в коде.

Какие типичные симптомы “большого проекта” вы ожидаете увидеть, и почему они появляются? 
        Симптомы: высокая стоимость внесения изменений, хрупкость (правка в одном месте ломает другое), «спагетти-код» и непонимание разработчиками смысла данных. Они появляются из-за отсутствия четких границ ответственности и накопления технического долга при усложнении бизнеса.

“Технически хороший код ≠ хороший бизнес-код”. Раскройте мысль на примере: как может выглядеть “чистая” архитектура, которая плохо отражает бизнес? 
        Это код с идеальными интерфейсами, DI и 100% покрытием тестами, где классы называются DataProcessor или Manager. Технически он совершенен, но он не дает понять, реализует ли он «акцепт оферты» или «списание бонусов», скрывая бизнес-суть за абстракциями.

Дайте определение domain. Чем domain отличается от “просто набора сущностей в базе данных”? 
        Домен — это сфера деятельности или область знаний, для которой разрабатывается ПО. В отличие от БД, домен включает в себя не только структуру данных, но и правила, процессы, ограничения и поведение, специфичные для конкретного бизнеса.

Что такое domain model и почему она должна содержать поведение, а не только данные? 
        Это концептуальная схема домена, выраженная в коде. Поведение (методы) необходимо для защиты инвариантов и гарантии того, что объект всегда находится в корректном состоянии, исключая возможность изменения данных в обход бизнес-правил.

Объясните разницу между domain model и database model. В каких случаях их структуры сознательно должны отличаться? 
        Доменная модель оптимизирована для реализации бизнес-логики и защиты инвариантов, а модель БД — для эффективного хранения и поиска. Структуры отличаются при использовании сложных иерархий наследования, нормализации/денормализации или когда один доменный объект сохраняется в несколько таблиц.

Объясните разницу между domain model и DTO/API model. Какие риски возникают при “смешивании ролей”? 
        Доменная модель инкапсулирует логику, а DTO — это плоская структура для передачи данных. Смешивание ролей ведет к утечке деталей реализации вовне, невозможности изменить внутреннюю логику без поломки API и риску нарушения безопасности данных.

Почему в DDD domain model считается “центром приложения”? Какие практические выгоды это даёт при изменениях требований? 
        Модель не зависит от БД, UI или фреймворков, что делает её максимально стабильной. При изменении требований вы меняете логику в одном месте (в модели), не заботясь о технических деталях, что ускоряет разработку и снижает количество багов.

Назовите признаки, по которым вы решите, что DDD оправдан: какие свойства домена и продукта должны присутствовать? 
        Высокая сложность бизнес-логики, наличие неоднозначных терминов, длительный жизненный цикл проекта (от 1-2 лет) и возможность прямого доступа к экспертам предметной области.

Назовите признаки, по которым вы решите, что DDD избыточен. Чем это может навредить проекту? 
        DDD избыточен для простых CRUD-приложений, временных прототипов или систем с тривиальной логикой. Навредить он может неоправданным усложнением кода («overengineering»), замедлением разработки и лишними затратами на проектирование там, где это не окупится.

Что входит в “стоимость DDD”? Какие организационные и инженерные дисциплины нужны, чтобы DDD не деградировал? 
        Стоимость включает время на глубокое проектирование и постоянное общение с экспертами. Нужны: строгая дисциплина именования (UL), регулярные сессии моделирования, code-review на соответствие домену и изоляция слоев (Clean Architecture).

Сравните Strategic и Tactical DDD. Какие ошибки возникают, если начать “тактику” без “стратегии”? 
        Стратегическое проектирование определяет границы (Bounded Contexts) и связи, а тактическое — паттерны кода (Entities, Aggregates). Ошибка: создание «большого комка грязи» из красивых классов, которые конфликтуют друг с другом из-за отсутствия четких границ смыслов.

Объясните принцип Domain-first. Как будет выглядеть проектирование “в обратном порядке”, и к чему это приводит? 
        Сначала проектируется логика и поведение, а затем БД и UI. Обратный порядок (DB-first) приводит к тому, что бизнес-логика становится заложником структуры таблиц, а код превращается в процедурную обработку строк из базы.

Сравните богатую доменную модель и анемичную. По каким признакам в коде вы быстро распознаете анемичную модель? 
        Богатая модель содержит и данные, и логику. Анемичная модель — это классы, состоящие только из публичных свойств (get/set), где вся логика вынесена во внешние классы с суффиксами Service или Manager.