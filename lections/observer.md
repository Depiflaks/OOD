## Наблюдатель
Поведенческий паттерн проектирования, который создает механизм подписки, позволяющий одному объекту (субъекту или издателю) автоматически оповещать и обновлять множество других объектов (наблюдателей или подписчиков) при изменении своего состояния, обеспечивая слабую связанность между ними

#### Термины
1) Субьект - объект, в котором находятся интересные данные (журнал)
2) Наблюдатели - объекты, которые смотрят за состоянием субьекта, при этом никак не влияя на него (читатели)
3) Клиент - то, что выполняет изменения над субьектом, контроллируя его поведение

#### Mодели получения данных
1) Pull
Наблюдатели хранят внутри себя ссылку на субьект
Субьект только оповещает наблюдателей о том, что у него что-то поменялось, а они в свою очередь обратяться к нужному полю и получат интересные им данные

2) Push
Субьект выполняет рассылку одного и того же пакета данных всем наблюдателям
И дальше они уже сами решают, что им нужно, а что нет

3) Subscribe
Наблюдатели сами выбирают, что им интересно получать от субъекта

#### Инициатор рассылки
1) Субьект
при каждом изменении состояния дёргает всех наблюдателей. Можно внести дополнительные ограничения на частоту отправки оповещений

2) Клиент
После выполнения операций над субьектом он сам решает, когда дёрнуть наблюдателей

#### This is late parrot
Обратить внимание на провисшие указатели после:
1) уничтожения наблюдателя
2) уничтожения субьекта

*можно использовать слабые ссылки*

#### Безопасность
Важно иметь ввиду, что при оповещении наблюдателей, субьект должен находиться в валидном состоянии, иначе это приведёт к неопределённому поведению

Также нужно аккуратнее дёргать субъект через наблюдателей, потому что это может вызвать рекурсивный пинг-понг

Как решить: можно сделать флаг, который будет блокировать повторные изменения метода

Как решить: паттерн "шаблонный метод"

#### Функциональный стиль

Если интерфейс наблюдателя содержит только 1 метод

```mmd

```
