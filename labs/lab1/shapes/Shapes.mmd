
classDiagram
    direction TB

    namespace gfx {
        class ICanvas {
            <<interface>>
            + MoveTo(x: double, y: double)
            + SetColor(color: Color)
            + LineTo(x: double, y: double)
            + DrawEpilse(cx: double, cy: double, rx: double, ry: double)
            + DrawText(left: double, top: double, fontSize: double, text: string)
        }
    }

    namespace shapes {
        class Bounds {
            +position Position
            +size Size
        }

        class Position {
            +x double
            +y double
        }

        class Size {
            +w double
            +h double
        }

        class IShapeModel {
            <<interface>>
            +GetBounds() 
            +Draw(ICanvas& canvas)
        }

        class RectangleModel {
        }

        class TriangleModel {
            -m_vertex1 double
            -m_vertex2 double
            -m_vertex3 double
        }

        class Color {
            +Value() uint32t
            +ToString() std::string

            -color uint32t
        }

        class Picture {
            +Picture(ICanvas& canvas)
            +DrawPicture() void
            +DrawShape(std::string id) void
            +AddShape(std::string id, Color color, IShapeModel model)
            +ChangeShape(std::string id, IShapeModel model)
            +ChangeColor(std::string id, Color color)
            +List()
            +DeleteShape(std::string id)
            +MovePicture(double dx, double dy)
            +MoveShape(std::string id, double dx, double dy)


            -m_bounds Bounds

            -m_canvas ICanvas*
            -m_shapes std::unordered_map<std::string, IShape>
        }

        class IShape {
            <<interface>>
            +Draw(ICanvas canvas) void
            +SetFillColor(Color color) void
            +ChangeShape(IShapeModel model) void
            +Move(double dx, double dy) void

            +ToString() std::string
        }

        class Shape {
            -m_shapeModel IShapeModel
        }


        class ShapesCommandLine {
            +Start(Picture& picture) void

            -ExecuteCommand(Picture& picture)
        }
    }

    namespace commands {

        class ArgumentType {
            <<enum>>
            +string
            +int
            +double
            +shape
        }

        class CommandType {
            <<enum>>
            +AddShape
            +MoveShape
            ...
        }

        class ICommandListener {
            <<interface>>
            +GetLine() std::string
        }

        class StdCommandListener {
            +GetLine() std::string
        }

        class CommandExecutor {
            +Execute(Picture& picture, std::string commandLine)

            -ParseCommandName(std::string command) std::string
            -ExecuteCommand() void
        }

        class ICommand {
            <<interface>>
            +Execute(Picture& picture, std::string argumentsLine)
        }


        class AddShapeCommand {
            +Execute(Picture& picture, std::string argumentsLine)

            -Parse(...)
            -m_argumentsTypes std::vector<ArgumentType>
        }

        
        class ShapeParser {
            +Parse(std::string shapeParameters) IShapeModel
        }
    }

    IShape <|.. Shape
    ICommandListener <|.. StdCommandListener
    ICommand <|.. AddShapeCommand

    Picture o--> ICanvas

    IShapeModel <|.. RectangleModel
    IShapeModel <|.. TriangleModel


